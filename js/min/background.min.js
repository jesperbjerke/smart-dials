chrome.browserAction.onClicked.addListener(function(e){function t(t){chrome.tabs.executeScript(e.id,{code:'localStorage.setItem("dialID",'+t+");"},function(){chrome.tabs.executeScript(e.id,{file:"js/min/thumbnail.min.js"},function(){chrome.browserAction.setBadgeText({text:"OK",tabId:e.id}),setTimeout(function(){chrome.browserAction.setBadgeText({text:"",tabId:e.id})},3e3)})})}function o(o){var n={};n[o]={id:o,name:e.title,url:e.url,thumb:"",setThumb:1,favicon:e.favIconUrl,smartGroups:{home:{morning:0,day:0,afternoon:0,evening:0,night:0},work:{morning:0,day:0,afternoon:0,evening:0,night:0}}},chrome.storage.sync.set(n,function(){t(o)})}chrome.browserAction.setBadgeText({text:"wait",tabId:e.id}),chrome.browserAction.setBadgeBackgroundColor({color:"#2C2C2C",tabId:e.id}),chrome.storage.sync.get(null,function(e){var t=Object.keys(e).length;if(t>1){var n=0,r=t-1;for(var i in e)if(n++,n===r){var c=e[i].id;c++,o(c)}}else o(1)})});